function Exchange(e){this.ssoProvider=e,this.ssoProvider.getSsoToken||(this.ssoProvider.getSsoToken=new Function),this.ssoProvider.getExtension=void 0,this.ssoProvider.getWithdrawExtension=void 0,this.accountId=void 0,this.tokenCache={},this.sessionCache={},this.orderTicket=void 0}Exchange.RemoteUrl={CREATE_ACCOUNT_TOKEN:"/auth/token/account.create",QUERY_ACCOUNT_INFO:"/account/info.query",CREATE_TOKEN:"/auth/token.create",CREATE_SESSION:"/auth/session.create",ORDER_TICKET:"/order/orderId.create",ASSET_TICKET:"/asset/ticket.create",LIST_COMPLETED_ORDER:"/order/completed.list",LIST_OPEN_ORDER:"/order/open.list",LIST_FILLED_ORDER:"/order/detail/filled.list",CREATE_NEW_ORDER:"/order/newOrder.create",CANCEL_ORDER:"/order/openOrder.cancel",LIST_SYMBOL_INFO:"/util/symbol.list",WITHDRAW:"/asset/withdraw.create",DEPOSIT:"/asset/deposit/address.query",BALANCE:"/asset/balance.list",ACTIVITY:"/asset/activity.list",LIST_CURRENCY_INFO:"/util/currency.list",LIST_WITHDRAW_ADDRESS:"/util/address/withdraw.list",CREATE_WITHDRAW_ADDRESS_INFO:"/util/address/withdraw.create",DELETE_WITHDRAW_ADDRESS:"/util/address/withdraw.delete"},Exchange.TokenType={ORDER:"ORDER",ASSET:"ASSET",ACCOUNT:"ACCOUNT",UTIL:"UTIL"},Exchange.checkExpiredAble=function(e){return e&&e.expiredAt>(new Date).getTime()+6e4?e.value:null},Exchange.userClientInfo=function(){return{}},Exchange.errorMessage={en:{500:"Internal Server Error",65579:"General server error",131099:"Create an account exception",131114:"No account",131130:"The current account has been locked",131146:"The account is not normal",131162:"Account is not in correct status",196634:"Token error",196650:"Session error",196666:"Session extension validation Error",196682:"Login has expired",196698:"Session type error",262170:"Withdraw address does not exist",262186:"Too much withdraw address",262202:"Unknown Symbol",262218:"Unknown Currency",262234:"Currency Unknown CoinType",262250:"Unknown CoinType",262266:"Unknown Coin",327706:"Create order failed",327723:"Create order failed",327738:"Order does not exist",327755:"Cancel order failed",327770:"Create order waiting for timeout",327786:"Too much open order",327802:"The current order cannot be cancelled",327962:"Daily order is limited to 100 times, please try again tomorrow",327978:"Can not exceed 105% of the current sell1 price",327994:"Can't be less than 95% of the current buy1 price",393242:"Asset ticket error",393258:"Asset freeze not enough",393274:"Asset unfreeze not enough",393290:"Asset reduction freeze partial error",393306:"Asset increase available error",393338:"Deposit address query error"},"zh-CN":{500:"服务器维护",65579:"通用服务器端错误",131099:"创建账号异常",131114:"账号不存在",131130:"账号被锁定",131146:"账号不是正常状态",131162:"帐户状态不正确",196634:"Token错误",196650:"Session无效",196666:"session的扩展认证信息无效",196682:"登录已失效",196698:"Session 未知类型错误",262170:"提币地址不存在",262186:"提币地址过多",262202:"未知交易代码",262218:"未知币种",262234:"币种已知，cointype未知",262250:"未知cointype",262266:"未知coin",327706:"订单创建失败",327723:"订单创建失败",327738:"订单不存在",327755:"撤单失败",327770:"创建订单等待超时",327786:"委托单过多",327802:"订单当前状态不可取消",327962:"每日下单上限100次，请明天再试",327978:"不能超过当前卖1价格的105%",327994:"不能低于当前买1价格的95%",393242:"资产ticket无效",393258:"资产冻结不足",393274:"资产解冻不足",393290:"资产减少冻结部分错误",393306:"资产增加错误",393338:"充值地址查询错误"}},Exchange.errorHandler=function(e){$(".error-msg").text(e).removeClass("dis-n"),$(".error").fadeIn(500).fadeOut(2e3)},Exchange.remoteUrl=function(e,n){if(n){var t=$.param(n,!0);return"/api/spot"+e+"?"+decodeURIComponent(t)}return"/api/spot"+e},Exchange.remoteGET=function(e,n,t,o){$.ajax({url:Exchange.remoteUrl(e,n),type:"GET",data:t,dataType:"json",success:function(e){o(e)},error:function(e,n,t){setTimeout(function(){o()},1e4)},statusCode:{400:function(e){var n=JSON.parse(e.responseText).code,t=Exchange.errorMessage[localStorage.getItem("countryLanguage")][n];Exchange.errorHandler(t)},500:function(e){var n=Exchange.errorMessage[localStorage.getItem("countryLanguage")][500];Exchange.errorHandler(n)},502:function(){o()},504:function(){o()}}})},Exchange.remotePOST=function(e,n,t,o){$.ajax({url:Exchange.remoteUrl(e,n),type:"POST",contentType:"application/json",data:JSON.stringify(t),dataType:"json",success:function(e){o(e)},error:function(e,n,t){setTimeout(function(){o()},1e4)},statusCode:{400:function(e){var n=JSON.parse(e.responseText).code,t=Exchange.errorMessage[localStorage.getItem("countryLanguage")][n];Exchange.errorHandler(t),196682==n&&setTimeout(function(){Cookies.remove("loginToken",{domain:document.domain.split(".").slice(-2).join(".")}),localStorage.removeItem("ACCOUNT_TOKEN"),localStorage.removeItem("ORDER_TOKEN"),localStorage.removeItem("ASSET_TOKEN"),localStorage.removeItem("UTIL_TOKEN"),localStorage.removeItem("accountId"),localStorage.removeItem("ACCOUNT_SESSION"),localStorage.removeItem("ORDER_SESSION"),localStorage.removeItem("ASSET_SESSION"),localStorage.removeItem("orderTicket"),window.location.reload()},2e3)},500:function(e){var n=Exchange.errorMessage[localStorage.getItem("countryLanguage")][500];Exchange.errorHandler(n)},502:function(){o()},504:function(){o()}}})},Exchange.remotePOSTParam=function(e,n,t,o){$.ajax({url:Exchange.remoteUrl(e,n),type:"POST",data:t,dataType:"json",success:function(e){o(e)},error:function(e,n,t){o()},statusCode:{400:function(e){var n=JSON.parse(e.responseText).code,t=Exchange.errorMessage[localStorage.getItem("countryLanguage")][n];Exchange.errorHandler(t),196682==n&&setTimeout(function(){Cookies.remove("loginToken",{domain:document.domain.split(".").slice(-2).join(".")}),localStorage.removeItem("ACCOUNT_TOKEN"),localStorage.removeItem("ORDER_TOKEN"),localStorage.removeItem("ASSET_TOKEN"),localStorage.removeItem("UTIL_TOKEN"),localStorage.removeItem("accountId"),localStorage.removeItem("ACCOUNT_SESSION"),localStorage.removeItem("ORDER_SESSION"),localStorage.removeItem("ASSET_SESSION"),localStorage.removeItem("orderTicket"),window.location.reload()},2e3)},500:function(e){var n=Exchange.errorMessage[localStorage.getItem("countryLanguage")][500];Exchange.errorHandler(n)},502:function(){o()},504:function(){o()}}})},Exchange.prototype.getSymbolList=function(n){Exchange.remoteGET(Exchange.RemoteUrl.LIST_SYMBOL_INFO,null,null,function(e){n(e)})},Exchange.prototype.getCurrencyList=function(n){Exchange.remoteGET(Exchange.RemoteUrl.LIST_CURRENCY_INFO,null,null,function(e){n(e)})},Exchange.prototype.getAccountToken=function(n){var t=this,e=t.tokenCache[Exchange.TokenType.ACCOUNT],o=Exchange.checkExpiredAble(e);o?n(o):getValue("ACCOUNT_TOKEN")?n(getValue("ACCOUNT_TOKEN")):t.ssoProvider.getSsoToken(function(e){Exchange.remotePOST(Exchange.RemoteUrl.CREATE_ACCOUNT_TOKEN,{ssoToken:e},Exchange.userClientInfo(),function(e){t.tokenCache[Exchange.TokenType.ACCOUNT]=e,setValue("ACCOUNT_TOKEN",e),n(e.value)})})},Exchange.prototype.getAccountId=function(n){var t=this;t.accountId?n(t.accountId):localStorage.getItem("accountId")?n(localStorage.getItem("accountId")):t.getAccountToken(function(e){Exchange.remoteGET(Exchange.RemoteUrl.QUERY_ACCOUNT_INFO,{token:e},null,function(e){t.accountId=e.accountId,localStorage.setItem("accountId",e.accountId),n(e.accountId)})})},Exchange.prototype.queryAccountInfo=function(n){this.getAccountToken(function(e){Exchange.remoteGET(Exchange.RemoteUrl.QUERY_ACCOUNT_INFO,{token:e},null,function(e){n(e)})})},Exchange.prototype.getToken=function(o,t){var c=this,e=c.tokenCache[o],n=Exchange.checkExpiredAble(e);if(n)t(n);else if(getValue(o+"_TOKEN"))t(getValue(o+"_TOKEN"));else{var r=null;$.each(c.tokenCache,function(e,n){if(e!=o){var t=Exchange.checkExpiredAble(n);if(t)return r=t,!1;if(getValue(e+"_TOKEN"))return r=getValue(e+"_TOKEN"),!1}}),r?a(r):c.getAccountToken(function(e){a(e)})}function a(n){c.getAccountId(function(e){Exchange.remotePOST(Exchange.RemoteUrl.CREATE_TOKEN,{token:n},{accountId:e,tokenType:o},function(e){c.tokenCache[o]=e,setValue(o+"_TOKEN",e),t(e.value)})})}},Exchange.prototype.getSession=function(t,o){var c=this,e=this.sessionCache[t],n=Exchange.checkExpiredAble(e);n?o(n):getValue(t+"_SESSION")?o(getValue(t+"_SESSION")):c.getAccountId(function(n){c.getToken(t,function(e){Exchange.remotePOST(Exchange.RemoteUrl.CREATE_SESSION,{token:e},{accountId:n,extension:c.ssoProvider.getExtension},function(e){c.sessionCache[t]=e,setValue(t+"_SESSION",e),o(e.value)})})})},Exchange.prototype.getWithdrawSession=function(e,t){var o=this;o.getAccountId(function(n){o.getToken(e,function(e){Exchange.remotePOST(Exchange.RemoteUrl.CREATE_SESSION,{token:e},{accountId:n,extension:o.ssoProvider.getWithdrawExtension},function(e){t(e.value)})})})},Exchange.prototype.getOrderTicket=function(t){var e=this;e.getAccountId(function(n){e.getSession(Exchange.TokenType.ORDER,function(e){Exchange.remotePOSTParam(Exchange.RemoteUrl.ORDER_TICKET,{session:e},{accountId:n},function(e){t(e.value)})})})},Exchange.prototype.getAssetTicket=function(t){var e=this;e.getAccountId(function(n){e.getToken(Exchange.TokenType.ASSET,function(e){Exchange.remotePOSTParam(Exchange.RemoteUrl.ASSET_TICKET,{token:e},{accountId:n},function(e){t(e.value)})})})},Exchange.prototype.listOpenOrder=function(t){var e=this;e.getAccountId(function(n){e.getToken(Exchange.TokenType.ORDER,function(e){Exchange.remoteGET(Exchange.RemoteUrl.LIST_OPEN_ORDER,{token:e},{accountId:n},function(e){t(e)})})})},Exchange.prototype.listCompletedOrder=function(t,o){var e=this;t=t||1,e.getAccountId(function(n){e.getToken(Exchange.TokenType.ORDER,function(e){Exchange.remoteGET(Exchange.RemoteUrl.LIST_COMPLETED_ORDER,{token:e},{accountId:n,page:t,limit:10},function(e){o(e)})})})},Exchange.prototype.listFilledOrder=function(t,o){var e=this;t=t||1,e.getAccountId(function(n){e.getToken(Exchange.TokenType.ORDER,function(e){Exchange.remoteGET(Exchange.RemoteUrl.LIST_FILLED_ORDER,{token:e},{accountId:n,page:t,limit:10},function(e){o(e)})})})},Exchange.prototype.createNewOrder=function(o,c){var e=this;e.getAccountId(function(t){e.getSession(Exchange.TokenType.ORDER,function(n){e.getOrderTicket(function(e){Exchange.remotePOST(Exchange.RemoteUrl.CREATE_NEW_ORDER,{session:n},{accountId:t,orderId:e,orderInfo:o},function(e){c(e)})})})})},Exchange.prototype.cancelOrder=function(t,o){var e=this;e.getAccountId(function(n){e.getSession(Exchange.TokenType.ORDER,function(e){Exchange.remotePOST(Exchange.RemoteUrl.CANCEL_ORDER,{session:e},{accountId:n,orderId:t},function(e){o(e)})})})},Exchange.prototype.withdraw=function(o,c,r,a,i){var e=this;e.getAccountId(function(t){e.getWithdrawSession(Exchange.TokenType.ASSET,function(n){e.getAssetTicket(function(e){Exchange.remotePOST(Exchange.RemoteUrl.WITHDRAW,{session:n},{currency:o,accountId:t,ticket:e,address:c,amount:r,fee:a},function(e){i(e)})})})})},Exchange.prototype.deposit=function(t,o){var e=this;e.getAccountId(function(n){e.getToken(Exchange.TokenType.ASSET,function(e){Exchange.remoteGET(Exchange.RemoteUrl.DEPOSIT,{token:e},{currency:t,accountId:n},function(e){o(e)})})})},Exchange.prototype.balance=function(t){var e=this;e.getAccountId(function(n){e.getToken(Exchange.TokenType.ASSET,function(e){Exchange.remoteGET(Exchange.RemoteUrl.BALANCE,{token:e},{accountId:n},function(e){t(e)})})})},Exchange.prototype.withdrawAddress=function(t,o){var e=this;e.getAccountId(function(n){e.getToken(Exchange.TokenType.UTIL,function(e){Exchange.remoteGET(Exchange.RemoteUrl.LIST_WITHDRAW_ADDRESS,{token:e},{currency:t,accountId:n},function(e){o(e)})})})},Exchange.prototype.createWithdrawAddress=function(t,o,c,r){var e=this;e.getAccountId(function(n){e.getToken(Exchange.TokenType.UTIL,function(e){Exchange.remotePOSTParam(Exchange.RemoteUrl.CREATE_WITHDRAW_ADDRESS_INFO,{token:e},{accountId:n,currency:t,friendlyName:o,address:c},function(e){r(e)})})})},Exchange.prototype.deleteWithdrawAddress=function(t,o,c,r){var e=this;e.getAccountId(function(n){e.getToken(Exchange.TokenType.UTIL,function(e){Exchange.remotePOSTParam(Exchange.RemoteUrl.DELETE_WITHDRAW_ADDRESS,{token:e},{accountId:n,currency:t,friendlyName:o,address:c},function(e){r(e)})})})},Exchange.prototype.activity=function(t,o,c,r){var e=this;e.getAccountId(function(n){e.getToken(Exchange.TokenType.ASSET,function(e){Exchange.remoteGET(Exchange.RemoteUrl.ACTIVITY,{token:e},{accountId:n,type:t,page:o,limit:c},function(e){r(e)})})})};