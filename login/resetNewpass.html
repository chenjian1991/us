<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <title>resetpassword</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
      <meta id="i18n_pagename" content="index">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-Control" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="stylesheet" href="../static/web/iconfont/iconfont.css?t=20180912">
    <link rel="stylesheet" href="../static/web/styles/index.css?t=20180912">
    <!-- <link rel="stylesheet" href="../static/web/styles/page/commonHeadFoot.css"> -->
     <link rel="stylesheet" href="../static/web/styles/header_footer.css?t=20180910">
    <link rel="stylesheet" href="../static/web/iconfont/iconfont.css?t=20180912">
    <link rel="stylesheet" href="../static/web/styles/page_new/sign_common.css?t=20180912">
    <link rel="stylesheet" href="../static/web/styles/page_new/forget.css?t=20180912">
    <link rel="stylesheet" href="../static/web/styles/page_new/signin.css?t=20180912">
    <link rel="stylesheet" href="../static/web/styles/page_new/signup.css?t=20180912">

</head>
<body>
<div class="wrapper" id="wrapper">
    <div class="big-container">
    <!--header Start-->
   <div class="common-header"></div>
    <!--header End-->
    <div class="container">
        <div class="content center-level">
            <div id="tabs-container" class="tab-content">
                <div>
                    <div class="content-common">
                        <form id="forgetForm">
                        <div class="register-content">
                            <div name='zhmmSetNewPassword' class="welcome i18n">
                               reset new password
                            </div>
                            <div class="register-form">
                                <div class="form-group">
                                    <img src="../static/web/images_new/mima@2x.png"
                                         class="left-icon vertically-centered">
                                    <input id="password" class="i18n-input" selectattr="placeholder"  selectname="zhmmInputNewPassword" name="password" type="password" minlength="8" maxlength="20">
                                    <!--<img src="../static/web/images_new/jianpan@2x.png"-->
                                         <!--class="right-icon vertically-centered">-->
                                </div>
                            </div>
                            <div class="register-form">
                                <div class="form-group">
                                    <img src="../static/web/images_new/queren@2x.png"
                                         class="left-icon vertically-centered">
                                    <input class="i18n-input" selectattr="placeholder"  selectname="zhmmConfirmPassword" name="confirmPass" type="password" minlength="8" maxlength="20">
                                    <!--<img src="../static/web/images_new/jianpan@2x.png"-->
                                         <!--class="right-icon vertically-centered">-->
                                </div>
                            </div>
                            
                            <div class="register-meta">
                                <button name="zhmmSetSubmit"  type="button"  class="i18n sure btn-same forgetPasswordSubmit">Submit</button>
                            <button style="display: none;" id="language-change" type="button"></button>

                            </div>
                        </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--footer Start-->
    <div class="common-footer"></div>
    </div>
    <!--footer End-->
</div>
</div>
<script type="text/javascript" src="../static/web/js/lib/jquery.min.js?t=20180912"></script>
<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>

<script type="text/javascript" src="../static/web/js/lib/jquery-validation-1.7.0.js?t=20180912"></script>
<script type="text/javascript" src="../static/web/js/page/plateformUrl.js?t=20180912"></script>
<script type="text/javascript" src='../static/web/js/lib/layer.js?t=20180912'></script>
<script type="text/javascript" src='../static/web/js/page/common_validate.js?t=20180912'></script>
<script type="text/javascript" src='../static/web/js/lib/jquery.i18n.properties.js?t=20180912'></script>
 <script type="text/javascript" src='../static/web/js/lib/language.js?t=20180912'></script>
 <script type="text/javascript" src="../static/web/js/page/plateformUrl.js?t=20180912"></script>
<script type="text/javascript" src="../static/web/js/page/header.js?t=20180912"></script>
<script type="text/javascript">
            $(document).ready(function(){
              importHeaderFooter()
                labelName()
                navigation('nav9')
                sanCode()
                $('#language-change').click(function(){
                    $('#forgetForm').valid()
                })
                $('.forgetPasswordSubmit').click(function(){
                        $('#forgetForm').valid()
                        if($('#forgetForm').valid()){
                            var password =  $('#password').val().trim().replace(/\s/g,'');
                            var data = {
                                "password":password,
                                "ex55Pin":localStorage.getItem('ex55Pin')
                            }
                           $.ajax({
                                url:api.resetPassword,
                                type:'post',
                                headers: {
                                    "Content-Type": "application/json;charset=UTF-8",
                                    "token": localStorage.getItem('reponseToken')
                                },
                                data:JSON.stringify(data),
                                dataType:'json',
                                success:function(data){
                                   //弹窗的国际化实现
                                    //layer.msg('<div class="i18n" name="aleryRegister"></div>')
                                    //必须写在layer.msg之后，因为只有渲染完成之后才可以获取到class='i18n'
                                    //公共的layer国际化方法
                                    if(data!=undefined){
                                        var code = data.code;
                                        if(code == 10000){
                                            layer.msg('<div class="i18n" name="systemBusy"></div>');
                                            layerInternational()
                                            return false;
                                        }else if(code ==10009){
                                            layer.msg('<div class="i18n" name="passwordSame"></div>')
                                            layerInternational()
                                            return false
                                        }else if(code = 10013){
                                            layer.msg('<div class="i18n" name="Unauthorized"></div>')
                                            layerInternational()
                                            Cookies.remove('loginToken',{domain:document.domain.split('.').slice(-2).join('.')});
                                            localStorage.removeItem("curPage");
                                            window.location.href='../exchange/b11/index.html#/login'
                                            return false
                                        }
                                    }
                                    layer.msg('<div class="i18n" name="passSetSuccess">success</div>',{
                                    time:1500,
                                    end:function(){
                                        window.location.href = "../exchange/b11/index.html#/login"
                                        
                                    }
                                })
                                   layerInternational()

                                }
                                
                    })

                        }
                    })

            })

</script>


</body>
</html>