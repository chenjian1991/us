<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <title class="i18n" name='bjlbHeaderTitle'>sponsor_list</title>
    <meta name="keywords" content="">
     <meta id="i18n_pagename" content="index">
    <meta name="description" content="">
    <link rel="stylesheet" href="../static/web/styles/index.css?t=20180912">
    <link rel="stylesheet" href="../static/web/styles/header_footer.css?t=20180910">
     <link rel="stylesheet" href="../static/web/iconfont/iconfont.css?t=20180912">
    <!--  <link rel="stylesheet" href="../static/web/styles/page/commonHeadFoot.css"> -->
    <link rel="stylesheet" href="../static/web/styles/page_new/sponsor_list.css?t=20180912">
    <link rel="stylesheet" href="../static/web/iconfont/iconfont.css?t=20180912">
    <link rel="stylesheet" href="../static/web/styles/page/pagination.css?t=20180912">

</head>
<body>
<div class="wrapper">
     <div class="big-container">
        <div class="common-header"></div>
        <div class="phone_wrapper">
        <div class="container clearfix">
        <div class="content clearfix">
            <p><a class="i18n" name="bjlbhome" href="../exchange/b11/index.html#/home">Home</a><a name="bjlbSponsor" class="i18n" href="javascrip:;"></a></p>
            <div class="account">
                <div class="account-box">
                    <div class="content-common">
                        <div class="content-header">
                            <div name='bjlbSponsorTitle' class="i18n box-title"></div>
                            <div class="jump-button"><button type="button" class="be-sponsor-btn">How to be the sponsor</button></div>
                            <!--<div class="input-box">-->
                                <!--<input type="search" class="search" placeholder="search">-->
                                <!--<i class="iconfont">&#xe60f;</i>-->
                            <!--</div>-->
                        </div>
                        <div id="sponsor_list_template">
                            

                        </div>
                        <div class="setPageDiv">
                            <div class="Pagination" id="pagination">
                                
                            </div>
                         </div> 
            <script type="text/javascript" src='../static/web/js/lib/jquery.min.js'></script>
            <script type="text/javascript" src='../static/web/js/lib/handlebars-1.0.0.beta.6.js'></script>
            <!-- 模板开始 -->
            <script id="sponsor-template" type="text/x-handlebars-template">
                    <div class="account-content clearfix">
                            <div class="table-box">
                                <table width="100%">
                                    <thead>
                                        <tr class="tr-title">
                                            <th name="bjlbName" class="i18n"></th>
                                            <th name="bjlbLevel" class="i18n"></th>
                                            <th name="bjlbSponsoredprojects" class="i18n"> </th>
                                            <th name="bjlbListedprojects" class="i18n"> </th>
                                            <th name="bjlbcase" class="i18n"></th>
                                         </tr>
                                    </thead>

                                   <tbody>
                                    {{#each this}}
                                       <tr class='sponsor-list' data-id="{{id}}">
                                        <td>
                                            <a target="_blank" data-id="{{id}}" href="./sponsor.html?id={{id}}">
                                                <span class="sponsor-logo-img clearfix"><img  src="{{image}}" class="img-logo"></span>
                                                <div class="sponsor">
                                                    <span class="sponsor-name">{{nameShow}}</span>
                                                    <p class="sponsor-desc">{{introduction}}</p>
                                                </div>
                                            </a>

                                        </td>
                                        <td class="level-box">
                                            <img src="../static/web/images_new/yellow.png" class="level-img center-level">
                                            <span class="level-num horizontally-centered ">Lv.{{level}}</span>
                                        </td>
                                        <td class="projects-box">
                                            <div class="projects-ball level-img center-level"></div>
                                            <span class="projects-num center-level">{{sponsoredNum}}</span>
                                        </td>
                                        <td>{{listedNum}}</td>
                                        <td>
                                            {{#each projectList}}
                                            <a target="_blank" href="../vote/supervision.html?id={{id}}" data-id="{{id}}">
                                                <img src="{{image}}">
                                            </a>
                                            {{/each}}
                                        </td>
                                    </tr>

                                    {{/each}}
                                   </tbody>
                                    
                                </table>
                            </div>
                        </div>
                        
            </script>
               <!-- 模板结束 -->         
                            </div>
                            </div>
                        </div>

                    </div>

                    </div>
                </div>

        <div class="common-footer"></div>
    </div>
    </div>


</body>
<script type="text/javascript" src="../static/web/js/lib/jquery.min.js?t=20180912"></script>
<script type="text/javascript" src="../static/web/js/page/plateformUrl.js?t=20180912"></script>
<script type="text/javascript" src='../static/web/js/page/jquery.pagination.js?t=20180912'></script>
<script type="text/javascript" src='../static/web/js/lib/jquery.i18n.properties.js?t=20180912'></script>
<script type="text/javascript" src="../static/web/js/lib/language.js?t=20180912"></script>
<script type="text/javascript" src="../static/web/js/page/header.js?t=20180912"></script>

<script type="text/javascript">


    $(document).ready(function(){
     importHeaderFooter('nav4')
        navigation('nav4')
        labelName()
        sanCode()
        $('.reload').click(function(){
                var value =$(this).attr('data-value')
                sendAjax(value)
            })
         })

        function layerInternational(){
           // var en = en;
            var countyrLanguage = localStorage.getItem('countryLanguage')
            //var countyrLanguage = countyrLanguage?countyrLanguage:en;
            loadPropery(countyrLanguage)

        }
        
        //抓取数据模板
        var theTemplateScript = $('#sponsor-template').html();
        //编译模板
        var theTemplate = Handlebars.compile(theTemplateScript);
        layerInternational()

            var Constants = {
                plateformShowUrl : "/api/"
            }
            var API = {
                sponsorList : Constants.plateformShowUrl+"content/sponsor/front/list",//保荐人
                supervisionList :Constants.plateformShowUrl+"content/supervision/front.list",//信批列表
            }
                function PageCallback(page_index,jq){
                     var curNumber = page_index.getCurrent()
                      var param = {
                        pageNum : curNumber,
                        pageSize : 10,
                        language : localStorage.getItem('countryLanguage')
                     }
                    sendGetRequestByJsonObj(API.sponsorList,param,function(data){
                     var list = data.list;
                    var theCompileHtml = theTemplate(list);
                    $('#sponsor_list_template').html(theCompileHtml);
                     layerInternational()

                })
                }

   

    function sendAjax(lanugageName){
                    //初始加载
                var param = {
                        pageNum : 1,
                        pageSize : 10,
                        language : lanugageName
                     }
    
                sendGetRequestByJsonObj(API.sponsorList,param,function(data){
                     var list = data.list;
                     var total = data.pages;
                    var theCompileHtml = theTemplate(list);
                    $('#sponsor_list_template').html(theCompileHtml);
                    layerInternational()
                        $('#pagination').pagination({
                        pageCount:total,
                        callback:PageCallback,
                        prev_text:'<',
                        next_text:'>',
                        items_per_page:10,
                        num_edge_entries:2,
                        num_display_entries: 10,
                        current_page:0,
                        mode: 'fixed',
                        isHide:true,
                        keepShowPN:true,
                        }) 

                })
                

                }

                
              
    sendAjax(localStorage.getItem('countryLanguage'))





</script>
</html>